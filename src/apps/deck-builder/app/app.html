<main class="builder-container">
	<div class="deck-container">
		<div class="card">
			<span>Total: {{totalCardQuantity()}}</span>
			<button (click)="copyLimitlessDeck()">Copy Limitless Deck</button>
			<button (click)="addCollectionCardDeck()">Save New Deck</button>
			<button (click)="reset()">Reset</button>
			@if(selectedDeckId()) {
			<button (click)="updateCollectionCardDeck()">Update Deck</button>
			<button (click)="deleteCollectionCardDeck()">Delete Deck</button>
			}
			<select [field]="LoadDeckForm">
				@for (collectionDeck of collectionDecks(); track collectionDeck._id) {
				<option [value]="collectionDeck._id">{{collectionDeck.name}}</option>
				}
			</select>
		</div>
		@for(card of deckCards(); track card.id) {
		<div class="card" [style.--background-image-url]="`url(${card.image}/low.webp)`">
			<span class="card-quantity">{{card.quantity}}</span>
			<div class="quantity-buttons">
				<button class="card-button" (click)="removeCard(card)">-</button>
				<button class="card-button" (click)="addCard(card)">+</button>
			</div>
		</div>
		}
	</div>
	<div class="collection-container">
		<search>
			<label for="search">Search name:</label>
			<input id="search" type="search" [field]="searchForm">
		</search>

		<div class="collection-cards">
			@for(card of sortedTcgDexCollectionCards(); track card.id) {
			<div class="card" [style.--background-image-url]="`url(${card.image}/low.webp)`">
				<span class="card-quantity">{{getQuantitySum(card.variants)}}</span>
				<div class="quantity-buttons">
					<button class="card-button" (click)="removeCard(card)">-</button>
					<button class="card-button" (click)="addCard(card)">+</button>
				</div>
			</div>
			}
		</div>
	</div>
</main>
<router-outlet />
