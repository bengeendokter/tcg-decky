<main class="builder-container">
	<div class="deck-container">
		<select [field]="LoadDeckForm">
			@for (collectionDeck of sortedCollectionDecks(); track collectionDeck._id) {
			<option [value]="collectionDeck._id">{{collectionDeck.name}}</option>
			}
		</select>
		<div class="deck-cards">
			<div class="card">
				<span>Total: {{totalCardQuantity()}}</span>
				<button (click)="openLimitlessDeckBuilder()">Open in Limitless Deck Builder</button>
				<button (click)="addCollectionCardDeck()">Save New Deck</button>
				<button (click)="reset()">Reset</button>
				@if(selectedDeckId()) {
				<button (click)="updateCollectionCardDeck()">Update Deck</button>
				<button (click)="deleteCollectionCardDeck()">Delete Deck</button>
				}
			</div>
			@for(card of deckCards(); track card.id) {
			<div class="card" [style.--background-image-url]="`url(${card.image}/low.webp)`">
				<button class="card-quantity" (click)="openDetail(card)">{{card.quantity}}</button>
				<div class="quantity-buttons">
					<button class="card-button" (click)="removeCard(card)">-</button>
					<button class="card-button" (click)="addCard(card)">+</button>
				</div>
			</div>
			}
		</div>
	</div>
	<div class="collection-container">
		<search>
			<label for="search">Search name:</label>
			<input id="search" type="search" [field]="searchForm">
		</search>

		<div class="collection-cards">
			@for(card of sortedTcgDexCollectionCards(); track card.id) {
			<div class="card" [style.--background-image-url]="`url(${card.image}/low.webp)`">
				<button class="card-quantity" (click)="openDetail(card)">{{getQuantitySum(card.variants)}}</button>
				<div class="quantity-buttons">
					<button class="card-button" (click)="removeCard(card)">-</button>
					<button class="card-button" (click)="addCard(card)">+</button>
				</div>
			</div>
			}
		</div>
	</div>
</main>
@let detailCard = selectedCard();
<dialog #dialog closedby="any">
	@if(detailCard) {
	<div (click)="closeDialog()" class="card detail-card"
		[style.--background-image-url]="`url(${detailCard.image}/high.webp)`">
	</div>
	}
</dialog>
<router-outlet />
